collections:
  - label: Thématiques
    collectionName: gps_thematiques
    type: taxonomy
  - label: Types de dispositif
    collectionName: gps_typesdispositif
    type: taxonomy
    relations:
      - label: Thématiques
        relationType: many-to-many
        userSelection: single-node
        sourceCollectionName: gps_typesdispositif
        targetCollectionName: gps_thematiques
        relationCollectionName: gps_typesdispositif_gps_thematiques
        sourceKey: gps_typesdispositif_id
        targetKey: gps_thematiques_id
  - label: Caractéristiques
    collectionName: gps_caracteristiquesdispositif
    type: taxonomy
    relations:
      - label: Thématiques
        relationType: many-to-many
        userSelection: single-node
        sourceCollectionName: gps_caracteristiquesdispositif
        targetCollectionName: gps_thematiques
        relationCollectionName: gps_caracteristiquesdispositif_gps_thematiques
        sourceKey: gps_caracteristiquesdispositif_id
        targetKey: gps_thematiques_id
  - label: Fiches dispositif
    collectionName: gps_fichesdispositif
    type: posts
    fields:
      - id
      - name
      - addresses
    relations:
      - label: Thématiques
        userSelection: single-node
        relationType: many-to-many
        sourceCollectionName: gps_fichesdispositif
        targetCollectionName: gps_thematiques
        relationCollectionName: gps_fichesdispositif_gps_thematiques
        sourceKey: gps_fichesdispositif_id
        targetKey: gps_thematiques_id
      - label: Types de dispositif
        relationType: many-to-one
        targetCollectionName: gps_typesdispositif
        userSelection: all-nodes
        field: gps_typesdispositif_id
      - label: Caractéristiques
        userSelection: leaves-only
        relationType: many-to-many
        sourceCollectionName: gps_fichesdispositif
        targetCollectionName: gps_caracteristiquesdispositif
        relationCollectionName: gps_fichesdispositif_gps_caracteristiquesdispositif
        sourceKey: gps_fichesdispositif_id
        targetKey: gps_caracteristiquesdispositif_id
  - label: Fiches techniques
    type: posts
    collectionName: gps_fichestechniques
    relations:
      - label: Thématiques
        userSelection: single-node
        relationType: many-to-many
        sourceCollectionName: gps_fichestechniques
        targetCollectionName: gps_thematiques
        relationCollectionName: gps_fichestechniques_gps_thematiques
        sourceKey: gps_fichestechniques_id
        targetKey: gps_thematiques_id