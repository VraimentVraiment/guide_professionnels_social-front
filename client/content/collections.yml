collections:
  - label: Thématiques
    collectionName: gps_thematiques
    type: taxonomy
  - label: Types de dispositif
    collectionName: gps_typesdispositif
    type: taxonomy
    relations:
      - collectionName: gps_thematiques
        label: Thématiques
        relationType: many-to-many
        userSelection: single-node
        relationCollectionName: gps_typesdispositif_gps_thematiques
        sourceKey: gps_typesdispositif_id
        targetKey: gps_thematiques_id
  - label: Caractéristiques
    collectionName: gps_caracteristiquesdispositif
    type: taxonomy
    relations:
      - collectionName: gps_thematiques
        label: Thématiques
        relationType: many-to-many
        userSelection: single-node
        relationCollectionName: gps_caracteristiquesdispositif_gps_thematiques
        sourceKey: gps_caracteristiquesdispositif_id
        targetKey: gps_thematiques_id
  - label: Fiches dispositif
    collectionName: gps_fichesdispositif
    type: post
    thumbnailFields:
      - id
      - name
      - addresses
    relations:
      - collectionName: gps_thematiques
        label: Thématiques
        userSelection: single-node
        relationType: many-to-many
        relationCollectionName: gps_fichesdispositif_gps_thematiques
        sourceKey: gps_fichesdispositif_id
        targetKey: gps_thematiques_id
      - collectionName: gps_typesdispositif
        label: Types de dispositif
        relationType: many-to-one
        userSelection: all-nodes
        field: gps_typesdispositif_id
      - collectionName: gps_caracteristiquesdispositif
        label: Caractéristiques
        userSelection: leaves-only
        relationType: many-to-many
        relationCollectionName: gps_fichesdispositif_gps_caracteristiquesdispositif
        sourceKey: gps_fichesdispositif_id
        targetKey: gps_caracteristiquesdispositif_id
  - label: Fiches techniques
    type: post
    collectionName: gps_fichestechniques
    relations:
      - collectionName: gps_thematiques
        userSelection: single-node
        relationType: many-to-many
        relationCollectionName: gps_fichestechnique_gps_thematiques
        sourceKey: gps_fichestechnique_id
        targetKey: gps_thematiques_id